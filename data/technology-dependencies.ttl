@prefix : <http://example.org/adr#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# ============================================
# TECHNOLOGY DEPENDENCIES
# ============================================
# 
# This file demonstrates Property Paths -
# unique SPARQL capability for navigating
# transitive dependencies in graph
#
# In SQL this requires recursive CTEs!
# ============================================

# ----- Direct dependencies -----

:Kafka :dependsOn :Java ;
       :dependsOn :Zookeeper ;
       rdfs:comment "Kafka requires Java Runtime and Zookeeper for coordination" .

:Kubernetes :dependsOn :Docker ;
            :dependsOn :etcd ;
            rdfs:comment "Kubernetes uses Docker and etcd for state storage" .

:Docker :dependsOn :Linux ;
        :dependsOn :ContainerRuntime ;
        rdfs:comment "Docker runs on Linux and needs container runtime" .

:PostgreSQL :dependsOn :Linux ;
            :dependsOn :FileSystem ;
            rdfs:comment "PostgreSQL requires Linux and file system" .

:Redis :dependsOn :Linux ;
       rdfs:comment "Redis runs on Linux" .

:MongoDB :dependsOn :Linux ;
         rdfs:comment "MongoDB requires Linux" .

# ----- Circular dependency (demonstration) -----
# ⚠️ ARCHITECTURAL ANTI-PATTERN - for demonstrating cycle detection!

:ServiceMesh :dependsOn :Kubernetes ;
             rdfs:comment "ServiceMesh deploys on Kubernetes" .

:Docker :dependsOn :ServiceMesh ;
        rdfs:comment "⚠️ Demo cycle: Docker uses ServiceMesh for networking" .

# Additional low-level dependencies
:Linux :dependsOn :Kernel .
:Java :dependsOn :JVM .
:Zookeeper :dependsOn :Java .
:etcd :dependsOn :Go .

# ----- Version requirements -----

:Kafka :requiresMinVersion [
    a :VersionRequirement ;
    :technology :Java ;
    :minVersion "11" ;
    :recommendedVersion "17" ;
    :reason "Performance and security improvements"
] .

:Kubernetes :requiresMinVersion [
    a :VersionRequirement ;
    :technology :Docker ;
    :minVersion "20.10" ;
    :reason "Security fixes and API compatibility"
] .

:PostgreSQL :requiresMinVersion [
    a :VersionRequirement ;
    :technology :Linux ;
    :minVersion "3.10" ;
    :reason "Support for modern system calls"
] .

# ----- Technology conflicts -----

:Kafka :conflictsWith :RabbitMQ ;
       rdfs:comment "Architectural differences: streaming vs messaging" .

:PostgreSQL :conflictsWith :MongoDB ;
            rdfs:comment "Different data models: relational vs document" .

# ----- Alternatives -----

:Kafka :hasAlternative :ApachePulsar ;
       :hasAlternative :AmazonKinesis ;
       :hasAlternative :RabbitMQ .

:PostgreSQL :hasAlternative :MySQL ;
            :hasAlternative :MongoDB ;
            :hasAlternative :CockroachDB .

:Kubernetes :hasAlternative :DockerSwarm ;
            :hasAlternative :Nomad ;
            :hasAlternative :AmazonECS .

# ----- Technology categories -----

:Kafka a :MessageBroker ;
       a :EventStreamingPlatform ;
       a :DistributedSystem ;
       rdfs:label "Apache Kafka" .

:PostgreSQL a :RelationalDatabase ;
            a :ACID_Compliant ;
            a :SQLDatabase ;
            rdfs:label "PostgreSQL" .

:Kubernetes a :ContainerOrchestrator ;
            a :CloudNative ;
            a :DistributedSystem ;
            rdfs:label "Kubernetes" .

:Docker a :ContainerRuntime ;
        a :Virtualization ;
        rdfs:label "Docker" .

:Redis a :InMemoryDatabase ;
       a :CacheSystem ;
       a :KeyValueStore ;
       rdfs:label "Redis" .

:MongoDB a :DocumentDatabase ;
         a :NoSQL ;
         a :DistributedSystem ;
         rdfs:label "MongoDB" .

:ServiceMesh a :NetworkingTool ;
             a :CloudNative ;
             a :Observability ;
             rdfs:label "Service Mesh (Istio/Linkerd)" .

# ----- Supporting technologies -----

:Zookeeper a :CoordinationService ;
           rdfs:label "Apache Zookeeper" .

:etcd a :KeyValueStore ;
      a :DistributedConfiguration ;
      rdfs:label "etcd" .

:Java a :ProgrammingLanguage ;
      rdfs:label "Java" .

:Go a :ProgrammingLanguage ;
    rdfs:label "Go" .

:Linux a :OperatingSystem ;
       rdfs:label "Linux" .

:Kernel a :SystemComponent ;
        rdfs:label "Linux Kernel" .

:JVM a :Runtime ;
     rdfs:label "Java Virtual Machine" .

:ContainerRuntime a :SystemComponent ;
                  rdfs:label "Container Runtime" .

:FileSystem a :SystemComponent ;
            rdfs:label "File System" .

# ----- Licenses -----

:Kafka :hasLicense :ApacheLicense ;
       :licenseType :OpenSource .

:PostgreSQL :hasLicense :PostgreSQLLicense ;
            :licenseType :OpenSource .

:MongoDB :hasLicense :SSPLLicense ;
         :licenseType :SourceAvailable .

:Kubernetes :hasLicense :ApacheLicense ;
            :licenseType :OpenSource .

:Docker :hasLicense :ApacheLicense ;
        :licenseType :OpenSource .

