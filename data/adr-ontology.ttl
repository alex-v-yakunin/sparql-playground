@prefix : <http://example.org/adr#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# ============================================
# ADR ONTOLOGY
# ============================================
#
# This file demonstrates RDFS/OWL reasoning -
# automatic inference of new facts from rules
#
# In SQL this requires triggers and procedures!
# ============================================

# ----- Decision class hierarchy -----

:ArchitecturalDecision a rdfs:Class ;
    rdfs:label "Architectural Decision" ;
    rdfs:comment "Base class for all architectural decisions" .

:TechnicalDecision rdfs:subClassOf :ArchitecturalDecision ;
    rdfs:label "Technical Decision" ;
    rdfs:comment "Decisions about technology and tool choices" .

:BusinessDecision rdfs:subClassOf :ArchitecturalDecision ;
    rdfs:label "Business Decision" ;
    rdfs:comment "Decisions related to business requirements" .

:SecurityDecision rdfs:subClassOf :ArchitecturalDecision ;
    rdfs:label "Security Decision" ;
    rdfs:comment "Decisions concerning information security" .

:ComplianceDecision rdfs:subClassOf :ArchitecturalDecision ;
    rdfs:label "Compliance Decision" ;
    rdfs:comment "Decisions for regulatory compliance" .

# Specialized technical decisions
:DatabaseDecision rdfs:subClassOf :TechnicalDecision ;
    rdfs:label "Database Decision" .

:InfrastructureDecision rdfs:subClassOf :TechnicalDecision ;
    rdfs:label "Infrastructure Decision" .

:IntegrationDecision rdfs:subClassOf :TechnicalDecision ;
    rdfs:label "Integration Decision" .

:PerformanceDecision rdfs:subClassOf :TechnicalDecision ;
    rdfs:label "Performance Decision" .

# ----- Property hierarchy -----

# Base property for infrastructure requirements
:requiresInfrastructure a rdf:Property ;
    rdfs:label "requires infrastructure" ;
    rdfs:domain :ADR ;
    rdfs:range :Technology .

# Specializations of infrastructure requirements
:requiresOrchestration rdfs:subPropertyOf :requiresInfrastructure ;
    rdfs:label "requires orchestration" ;
    rdfs:comment "If decision requires orchestration, it automatically requires infrastructure" .

:usesMicroservices rdfs:subPropertyOf :requiresOrchestration ;
    rdfs:label "uses microservices" ;
    rdfs:comment "Microservices require orchestration (automatically inferred)" .

:usesContainers rdfs:subPropertyOf :requiresOrchestration ;
    rdfs:label "uses containers" .

:requiresDistributedSystem rdfs:subPropertyOf :requiresInfrastructure ;
    rdfs:label "requires distributed system" .

# ----- Inverse properties -----

:dependsOn a rdf:Property ;
    rdfs:label "depends on" ;
    rdfs:comment "Technology A depends on technology B" .

:requiredBy owl:inverseOf :dependsOn ;
    rdfs:label "required by" ;
    rdfs:comment "Technology B required by technology A (inverse of dependsOn)" .

:supersedes a rdf:Property ;
    rdfs:label "supersedes" .

:supersededBy owl:inverseOf :supersedes ;
    rdfs:label "superseded by" .

# ----- Domains and ranges -----

:decidesTechnology rdfs:domain :ADR ;
                   rdfs:range :Technology ;
                   rdfs:label "decides to use technology" .

:appliesTo rdfs:domain :ADR ;
           rdfs:range :System ;
           rdfs:label "applies to" .

:uses rdfs:domain :System ;
      rdfs:range :Technology ;
      rdfs:label "uses" .

:ownedBy rdfs:range :Team ;
         rdfs:label "owned by" .

:hasStatus rdfs:domain :ADR ;
           rdfs:range :Status ;
           rdfs:label "has status" .

:hasConfidence rdfs:domain :ADR ;
               rdfs:range xsd:decimal ;
               rdfs:label "has confidence" .

# ----- OWL rules and constraints -----

# Definition of microservices architecture
:MicroserviceArchitecture a owl:Class ;
    rdfs:label "Microservices Architecture" ;
    owl:equivalentClass [
        a owl:Restriction ;
        owl:onProperty :usesMicroservices ;
        owl:someValuesFrom :Technology
    ] .

# If ADR uses microservices, it automatically requires orchestration
# (this is inferred via rdfs:subPropertyOf above)

# Constraint: only one status per ADR
:hasStatus a owl:FunctionalProperty ;
    rdfs:comment "ADR can have only one status at a time" .

# Symmetric property for conflicts
:conflictsWith a owl:SymmetricProperty ;
    rdfs:label "conflicts with" ;
    rdfs:comment "If A conflicts with B, then B conflicts with A" .

# Transitive property for dependencies
:dependsOn a owl:TransitiveProperty ;
    rdfs:comment "If A depends on B, and B depends on C, then A depends on C" .

# ----- Technology categories -----

:Technology a rdfs:Class ;
    rdfs:label "Technology" .

:MessageBroker rdfs:subClassOf :Technology ;
    rdfs:label "Message Broker" .

:EventStreamingPlatform rdfs:subClassOf :Technology ;
    rdfs:label "Event Streaming Platform" .

:Database rdfs:subClassOf :Technology ;
    rdfs:label "Database" .

:RelationalDatabase rdfs:subClassOf :Database ;
    rdfs:label "Relational Database" .

:NoSQLDatabase rdfs:subClassOf :Database ;
    rdfs:label "NoSQL Database" .

:DocumentDatabase rdfs:subClassOf :NoSQLDatabase ;
    rdfs:label "Document Database" .

:KeyValueStore rdfs:subClassOf :NoSQLDatabase ;
    rdfs:label "Key-Value Store" .

:InMemoryDatabase rdfs:subClassOf :Database ;
    rdfs:label "In-Memory Database" .

:ContainerOrchestrator rdfs:subClassOf :Technology ;
    rdfs:label "Container Orchestrator" .

:DistributedSystem rdfs:subClassOf :Technology ;
    rdfs:label "Distributed System" .

:OpenSourceTechnology a rdfs:Class ;
    rdfs:label "Open Source Technology" .

:ACID_Compliant a rdfs:Class ;
    rdfs:label "ACID-Compliant System" .

# ----- Annotations for ADR types -----

:ADR-001 a :TechnicalDecision ;
         a :InfrastructureDecision ;
         a :IntegrationDecision .

:ADR-002 a :TechnicalDecision ;
         a :DatabaseDecision ;
         a :SecurityDecision .

:ADR-003 a :TechnicalDecision ;
         a :InfrastructureDecision ;
         a :PerformanceDecision .

:ADR-005 a :TechnicalDecision ;
         a :DatabaseDecision .

:ADR-007 a :InfrastructureDecision .

:ADR-008 a :TechnicalDecision ;
         a :DatabaseDecision .

