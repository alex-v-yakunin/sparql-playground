# Неполные ADR (без привязки к системе)
#
# Найти ADR, которые не указывают, к какой системе они относятся.
# Демонстрирует Open World Assumption - отсутствие данных не означает ложь.
#
# В SQL: LEFT JOIN с проверкой NULL
# В SPARQL: FILTER NOT EXISTS - явная проверка отсутствия паттерна
#
# Ожидаемый результат: 3 строки (ADR-006 без системы, ADR-007 с 2 технологиями)
# Примечание: ADR-007 появляется дважды из-за двух технологий (Kubernetes + Docker)
# Время: < 1 секунды

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?adr ?label ?technology ?status
WHERE {
    ?adr a :ADR ;
         rdfs:label ?label ;
         :decidesTechnology ?tech ;
         :hasStatus ?status .
    
    ?tech rdfs:label ?technology .
    
    # This ADR does NOT have an :appliesTo relationship
    FILTER NOT EXISTS {
        GRAPH ?g {
            ?adr :appliesTo ?system .
        }
    }
}
ORDER BY ?adr

