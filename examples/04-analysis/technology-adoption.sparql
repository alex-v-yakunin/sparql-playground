# Анализ внедрения технологий
#
# Ранжировать технологии по количеству ADR, которые их выбирают,
# и их средней уверенности.
#
# В SQL: SELECT tech, COUNT(*), AVG(conf) FROM ... GROUP BY tech
# В SPARQL: агрегация с вычисляемым полем trustScore
#
# Ожидаемый результат: 6 технологий, ранжированных по степени внедрения
# Время: < 1 секунды

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?technology 
       (COUNT(?adr) AS ?adrCount)
       (AVG(?confidence) AS ?avgConfidence)
       (COUNT(?adr) * AVG(?confidence) AS ?trustScore)
WHERE {
    ?adr :decidesTechnology ?tech ;
         :hasConfidence ?confidence .
    
    ?tech rdfs:label ?technology .
}
GROUP BY ?technology
ORDER BY DESC(?trustScore)

