# Risky Architectural Decisions
#
# Find accepted ADRs with low confidence (<0.70).
#
# Expected result: 1 ADR (ADR-008 with confidence 0.62 from interview-notes)
# Note: One ADR can have different confidence in different sources
# Execution time: < 1 second

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?adr ?label ?technology ?confidence ?source
WHERE {
    GRAPH ?source {                    # Track data source
        ?adr a :ADR ;                  # Find all ADRs
             rdfs:label ?label ;       # Get label
             :hasStatus :Accepted ;    # Filter: only accepted decisions
             :decidesTechnology ?tech ;    # Get technology
             :hasConfidence ?confidence .  # Get confidence level
    }
    
    ?tech rdfs:label ?technology .     # Get technology label
    
    FILTER(?confidence < 0.70)         # Filter: low confidence
}
ORDER BY ?confidence                   # Sort from lowest to highest

# Explanation:
# These decisions are in production but uncertain - need review!
# Combines filtering by status (:Accepted) and numeric condition (confidence < 0.70).
# Query tracks data source through GRAPH.
# In SQL: WHERE status = 'Accepted' AND confidence < 0.70
# In Property Graph: filtering by node properties.
