# ADRs from Multiple Sources
#
# Find ADRs documented in more than one place.
#
# Expected result: 2 ADRs (ADR-007, ADR-008)
# Execution time: < 1 second

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?adr ?label (COUNT(DISTINCT ?source) AS ?sourceCount)  # Count unique sources
WHERE {
    GRAPH ?source {                    # Search across all graphs
        ?adr a :ADR ;                  # Find ADRs
             rdfs:label ?label .       # Get label
    }
}
GROUP BY ?adr ?label                   # Group by ADR
HAVING (?sourceCount > 1)              # Keep only those with >1 source
ORDER BY DESC(?sourceCount)            # Sort from highest to lowest

# Explanation:
# May indicate well-documented decisions OR conflicting information.
# COUNT(DISTINCT ?source) counts number of unique sources for each ADR.
# HAVING filters groups, keeping only those with more than one source.
# In SQL would require complex GROUP BY with subqueries.
# In Property Graph: count relationships to source nodes.
