# Count ADRs by Status
#
# Count number of architectural decisions in each status.
#
# Expected result: 3 rows (Accepted: 6, Proposed: 1, Deprecated: 1)
# Execution time: < 1 second

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?status ?statusLabel (COUNT(?adr) AS ?count)  # Aggregation: count ADRs
WHERE {
    ?adr a :ADR ;                   # Find all ADRs
         :hasStatus ?status .       # Get their status
    
    ?status rdfs:label ?statusLabel .  # Get status label
}
GROUP BY ?status ?statusLabel       # Group by status
ORDER BY DESC(?count)               # Sort from highest to lowest

# Explanation:
# Use GROUP BY to group by status and COUNT to count.
# In SQL: SELECT status, COUNT(*) FROM adr GROUP BY status
# In SPARQL: same aggregate functions, but working with a graph.
