# Subproperty Inference (RDFS Reasoning)
#
# Demonstrate automatic inference of more general properties.
#
# Expected result: 3 ADRs with infrastructure requirements
# Execution time: < 1 second

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?adrLabel ?technology ?specificProperty
WHERE {
    ?adr rdfs:label ?adrLabel ;        # ADR label
         :requiresInfrastructure ?tech . # General property (inferred automatically)
    
    ?tech rdfs:label ?technology .     # Technology label
    
    BIND(
        IF(EXISTS { ?adr :usesMicroservices ?tech }, "usesMicroservices",
        IF(EXISTS { ?adr :requiresDistributedSystem ?tech }, "requiresDistributedSystem",
        IF(EXISTS { ?adr :usesContainers ?tech }, "usesContainers",
        "requiresInfrastructure")))
        AS ?specificProperty           # Determine specific property
    )
}
ORDER BY ?adrLabel                     # Sort by ADR label

# Explanation:
# In the ontology defined:
# :usesMicroservices rdfs:subPropertyOf :requiresInfrastructure
# :requiresDistributedSystem rdfs:subPropertyOf :requiresInfrastructure
# :usesContainers rdfs:subPropertyOf :requiresInfrastructure
# 
# GraphDB automatically infers:
# if (?adr :usesMicroservices ?tech), then (?adr :requiresInfrastructure ?tech)
# 
# We can query by general property :requiresInfrastructure,
# and the reasoner will find all ADRs with any specific subproperties!
# 
# In SQL: would require triggers or complex UNION queries.
# In Property Graph: duplicate edges or meta-queries.
# In RDF with reasoning: automatic deduction based on ontology!
