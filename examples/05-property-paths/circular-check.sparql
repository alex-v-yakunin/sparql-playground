# Circular Dependency Check
#
# Detect cycles in the technology dependency graph.
#
# Expected result: 1 cycle (Docker → ServiceMesh → Kubernetes → Docker)
# Execution time: < 1 second

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?technology ?label
WHERE {
    ?tech :dependsOn+ ?tech ;          # Transitive dependency on itself
          rdfs:label ?label .          # Get technology label
    
    BIND(STR(?tech) AS ?technology)    # Convert URI to string
}

# Explanation:
# Property Path :dependsOn+ means "one or more steps through :dependsOn".
# Pattern ?tech :dependsOn+ ?tech searches for technologies depending on themselves via chain.
# This is an anti-pattern in architecture requiring immediate attention!
# In SQL would require recursive CTEs (Common Table Expressions).
# In Property Graph: similar traversal with cycle detection.
# Unlike SQL, SPARQL naturally works with transitive relationships.
