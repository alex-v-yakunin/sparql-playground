# Альтернативные пути зависимостей
#
# Найти отношения между технологиями через разные типы зависимостей.
#
# Ожидаемый результат: 5 связей с типом отношения
# Время выполнения: < 1 секунды

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?from ?to ?relationType
WHERE {
    {
        ?fromTech :dependsOn ?toTech .           # Прямая зависимость
        BIND("direct dependency" AS ?relationType)  # Присвоить тип отношения
    }
    UNION                                        # ИЛИ
    {
        ?fromTech :requiresInfrastructure ?toTech .  # Требование инфраструктуры
        BIND("infrastructure" AS ?relationType)      # Присвоить тип отношения
    }
    
    ?fromTech rdfs:label ?from .                 # Название технологии-источника
    ?toTech rdfs:label ?to .                     # Название технологии-назначения
}
ORDER BY ?from ?to                               # Сортировать по обоим технологиям

# Пояснение:
# Демонстрирует гибкость графовых запросов для навигации по разным типам связей.
# UNION объединяет результаты двух паттернов (прямые зависимости и требования инфраструктуры).
# BIND создаёт новую переменную с описанием типа отношения для каждого случая.
# Эквивалент property path: ?fromTech (:dependsOn|:requiresInfrastructure) ?toTech
# В SQL: два запроса с UNION ALL.
# В Property Graph: несколько типов рёбер между узлами.
