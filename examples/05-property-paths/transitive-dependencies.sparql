# –¢—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
#
# üî• –≠–¢–û –£–ù–ò–ö–ê–õ–¨–ù–û –î–õ–Ø SPARQL!
# –í SQL –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª—Å—è –±—ã —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π CTE –Ω–∞ 20+ —Å—Ç—Ä–æ–∫
#
# Property path —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º + –æ–∑–Ω–∞—á–∞–µ—Ç "–æ–¥–∏–Ω –∏–ª–∏ –±–æ–ª–µ–µ —à–∞–≥–æ–≤"
# :dependsOn+ –Ω–∞—Ö–æ–¥–∏—Ç –í–°–ï —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
#
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å–µ –ø—Ä—è–º—ã–µ –∏ —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Kubernetes
# –í—Ä–µ–º—è: < 1 —Å–µ–∫—É–Ω–¥–∞

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?dependency ?depLabel ?pathLength
WHERE {
    # –ù–∞–π—Ç–∏ –í–°–ï —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Kubernetes
    :Kubernetes :dependsOn+ ?dependency .
    
    OPTIONAL { ?dependency rdfs:label ?depLabel }
    
    # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –Ω–∞–π—Ç–∏ –¥–ª–∏–Ω—É –ø—É—Ç–∏
    {
        SELECT ?dependency (COUNT(?middle) + 1 AS ?pathLength)
        WHERE {
            :Kubernetes :dependsOn+ ?middle .
            ?middle :dependsOn* ?dependency .
        }
        GROUP BY ?dependency
    }
}
ORDER BY ?pathLength ?depLabel

# –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∂–µ—Ç:
# - Docker (–ø—Ä—è–º–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —É—Ä–æ–≤–µ–Ω—å 1)
# - etcd (–ø—Ä—è–º–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —É—Ä–æ–≤–µ–Ω—å 1)
# - Linux (—á–µ—Ä–µ–∑ Docker, —É—Ä–æ–≤–µ–Ω—å 2)
# - ContainerRuntime (—á–µ—Ä–µ–∑ Docker, —É—Ä–æ–≤–µ–Ω—å 2)
# - Go (—á–µ—Ä–µ–∑ etcd, —É—Ä–æ–≤–µ–Ω—å 2)
# - Kernel (—á–µ—Ä–µ–∑ Linux, —É—Ä–æ–≤–µ–Ω—å 3)

