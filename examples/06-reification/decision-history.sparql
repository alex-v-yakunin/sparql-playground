# History of Rejected Decisions
#
# Track history of ADR status changes (audit).
#
# Expected result: 1 record (ADR-004 was Accepted â†’ Deprecated)
# Execution time: < 1 second

PREFIX : <http://example.org/adr#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?adrLabel ?oldStatus ?newStatus ?changedBy ?changedOn ?reason
WHERE {
    ?statement a rdf:Statement ;       # Find reified statement
               rdf:subject ?adr ;      # Subject: which ADR is the statement about
               rdf:predicate :hasStatus ; # Predicate: :hasStatus property
               rdf:object ?newStatus ;    # Object: new status
               :previousValue ?oldStatus ; # Previous status value
               :statedBy ?person ;         # Who changed it
               :statedOn ?changedOn ;      # When changed it
               :changeReason ?reason .     # Reason for change
    
    ?adr rdfs:label ?adrLabel .        # ADR label
    ?person rdfs:label ?changedBy .    # Person's name
}
ORDER BY ?changedOn                    # Sort by change date

# Explanation:
# Reification allows making statements about statements.
# Structure: rdf:subject, rdf:predicate, rdf:object describe original triple.
# Additional properties (:previousValue, :statedBy, :statedOn, :changeReason)
# add metadata to the change.
# Critical for audit and compliance: who, when and why changed the status.
# In SQL: audit_log table with triggers.
# In Property Graph: meta-edges or hypergraphs.
# In RDF: built-in support through reification.
